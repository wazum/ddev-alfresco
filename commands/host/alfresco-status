#!/bin/bash

## Description: Check Alfresco service status
## Usage: alfresco-status
## Example: "ddev alfresco-status"

if ! ddev exec -s alfresco curl -f -s http://localhost:8080/alfresco/api/-default-/public/alfresco/versions/1/probes/-ready- > /dev/null 2>&1; then
    echo "Alfresco is not ready yet. Run 'ddev alfresco-wait' to wait for initialization."
    exit 1
fi

echo "âœ“ Alfresco is running and ready"
echo "  Access at: https://${DDEV_HOSTNAME}:8081/alfresco"
echo "  REST API: https://${DDEV_HOSTNAME}:8081/alfresco/api"
echo "  CMIS: https://${DDEV_HOSTNAME}:8081/alfresco/cmis"