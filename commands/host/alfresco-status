#!/bin/bash
#ddev-generated

## Description: Check Alfresco service status
## Usage: alfresco-status
## Example: "ddev alfresco-status"

if ! ddev exec -s alfresco curl -f -s http://localhost:8080/alfresco/api/-default-/public/alfresco/versions/1/probes/-ready- > /dev/null 2>&1; then
    echo "Alfresco is not ready yet. Run 'ddev alfresco-wait' to wait for initialization."
    exit 1
fi

echo "âœ“ Alfresco is running and ready"
PRIMARY_HOSTNAME=$(echo ${DDEV_PRIMARY_URL} | sed 's|https://||')
echo "  Alfresco: https://${PRIMARY_HOSTNAME}:8081/alfresco"
echo "  Share: https://${PRIMARY_HOSTNAME}:8081/share"
echo "  REST API: https://${PRIMARY_HOSTNAME}:8081/alfresco/api (requires authentication)"
echo "  CMIS: https://${PRIMARY_HOSTNAME}:8081/alfresco/cmis"
